<emr-sidebar [compact]="compact" class="sidebar">
  <emr-sidebar-header class="header">
    <div class="h-20 flex items-center w-full justify-between border-b border-b-default">
      <a emr-logo routerLink="/" emrSidebarCompactViewMode>AM</a>
      <a emr-logo routerLink="/" emrSidebarFullViewMode>ACADEMY MANAGER</a>
      <button mat-icon-button (click)="compact = !compact" class="sidebar-toggle">
        @if (compact) {
          <mat-icon>keyboard_double_arrow_right</mat-icon>
        } @else {
          <mat-icon>keyboard_double_arrow_left</mat-icon>
        }
      </button>
    </div>
  </emr-sidebar-header>
  <emr-sidebar-body class="body">
    <emr-sidebar-nav [activeKey]="activeKey">
      <!-- Elementos de navegación existentes -->
      @for (navItem of navItems; track navItem) {
        @switch (navItem.type) {
          @case ('link') {
            <a emr-sidebar-nav-item [routerLink]="navItem.link" [key]="navItem.key">
              <ng-container emrSidebarNavItemIcon>
                @if (navItem.icon) {
                  <mat-icon>{{ navItem.icon }}</mat-icon>
                }
              </ng-container>
              {{ navItem.name }}
            </a>
          }
          @case ('heading') {
            <emr-sidebar-nav-heading>{{ navItem.name }}</emr-sidebar-nav-heading>
          }
          @case ('group') {
            <emr-sidebar-nav-group>
              <emr-sidebar-nav-group-toggle>
                <ng-container emrSidebarNavItemIcon>
                  @if (navItem.icon) {
                    <mat-icon>{{ navItem.icon }}</mat-icon>
                  }
                </ng-container>
                <ng-container emrSidebarNavItemBadge>
                  @if (navItem.badge) {
                    {{ navItem.badge }}
                  }
                </ng-container>
                {{ navItem.name }}
                <mat-icon emrSidebarNavGroupToggleIcon>arrow_drop_down</mat-icon>
              </emr-sidebar-nav-group-toggle>
              <emr-sidebar-nav-group-menu>
                @for (childNavItem of navItem.children | orderBy:'name'; track childNavItem) {
                  <a emr-sidebar-nav-item
                     [routerLink]="childNavItem.link"
                     [key]="childNavItem.key">{{ childNavItem.name }}</a>
                }
              </emr-sidebar-nav-group-menu>
            </emr-sidebar-nav-group>
          }
          @default {
            <emr-sidebar-nav-item>{{ navItem.name }}</emr-sidebar-nav-item>
          }
        }
      }
      
      <!-- Nuevas secciones para Libros, Autores, Categorías y Préstamos -->
      <emr-sidebar-nav-heading>Biblioteca</emr-sidebar-nav-heading>
      
      <!-- Sección de Libros -->
      <emr-sidebar-nav-group>
        <emr-sidebar-nav-group-toggle>
          <ng-container emrSidebarNavItemIcon>
            <mat-icon>menu_book</mat-icon>
          </ng-container>
          Libros
          <mat-icon emrSidebarNavGroupToggleIcon>arrow_drop_down</mat-icon>
        </emr-sidebar-nav-group-toggle>
        <emr-sidebar-nav-group-menu>
          <a emr-sidebar-nav-item routerLink="libros/todos" key="libros-todos">Todos los Libros</a>
          <a emr-sidebar-nav-item routerLink="/libros/nuevo" key="libros-nuevo">Agregar Libro</a>
          <a emr-sidebar-nav-item routerLink="/libros/populares" key="libros-populares">Libros Populares</a>
        </emr-sidebar-nav-group-menu>
      </emr-sidebar-nav-group>
      
      <!-- Sección de Autores -->
      <emr-sidebar-nav-group>
        <emr-sidebar-nav-group-toggle>
          <ng-container emrSidebarNavItemIcon>
            <mat-icon>people</mat-icon>
          </ng-container>
          Autores
          <mat-icon emrSidebarNavGroupToggleIcon>arrow_drop_down</mat-icon>
        </emr-sidebar-nav-group-toggle>
        <emr-sidebar-nav-group-menu>
          <a emr-sidebar-nav-item routerLink="/autores/todos" key="autores-todos">Todos los Autores</a>
          <a emr-sidebar-nav-item routerLink="/autores/nuevo" key="autores-nuevo">Agregar Autor</a>
          <a emr-sidebar-nav-item routerLink="/autores/populares" key="autores-populares">Autores Destacados</a>
        </emr-sidebar-nav-group-menu>
      </emr-sidebar-nav-group>
      
      <!-- Sección de Categorías -->
      <emr-sidebar-nav-group>
        <emr-sidebar-nav-group-toggle>
          <ng-container emrSidebarNavItemIcon>
            <mat-icon>category</mat-icon>
          </ng-container>
          Categorías
          <mat-icon emrSidebarNavGroupToggleIcon>arrow_drop_down</mat-icon>
        </emr-sidebar-nav-group-toggle>
        <emr-sidebar-nav-group-menu>
          <a emr-sidebar-nav-item routerLink="/categorias/todas" key="categorias-todas">Todas las Categorías</a>
          <a emr-sidebar-nav-item routerLink="/categorias/nueva" key="categorias-nueva">Agregar Categoría</a>
          <a emr-sidebar-nav-item routerLink="/categorias/populares" key="categorias-populares">Categorías Destacadas</a>
        </emr-sidebar-nav-group-menu>
      </emr-sidebar-nav-group>
      
      <!-- Sección de Préstamos -->
      <emr-sidebar-nav-group>
        <emr-sidebar-nav-group-toggle>
          <ng-container emrSidebarNavItemIcon>
            <mat-icon>local_library</mat-icon>
          </ng-container>
          Préstamos
          <mat-icon emrSidebarNavGroupToggleIcon>arrow_drop_down</mat-icon>
        </emr-sidebar-nav-group-toggle>
        <emr-sidebar-nav-group-menu>
          <a emr-sidebar-nav-item routerLink="/prestamos/todos" key="prestamos-todos">Todos los Préstamos</a>
          <a emr-sidebar-nav-item routerLink="/prestamos/mis-prestamos" key="prestamos-mios">Mis Préstamos</a>
          <a emr-sidebar-nav-item routerLink="/prestamos/nuevo" key="prestamos-nuevo">Nuevo Préstamo</a>
        </emr-sidebar-nav-group-menu>
      </emr-sidebar-nav-group>
    </emr-sidebar-nav>
  </emr-sidebar-body>
  <emr-sidebar-footer class="footer">
    <div emrSidebarCompactViewMode>
      <emr-dicebear src="assets/avatars/1.svg"/>
    </div>
    <div class="emr-sidebar-container" emrSidebarFullViewMode>
      <emr-sidebar-toolbar/>
    </div>
  </emr-sidebar-footer>
</emr-sidebar>